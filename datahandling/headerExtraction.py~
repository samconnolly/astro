import pyfits
import os

dataroute = "/net/raid/raid1/xray/raid/sdc1g08/NetData/ngc1365/spectra/gti/"

infofilename  = "filenames.txt"

save = False
 
#------------------ MAIN PROG --------------------------------------------------

here = os.getcwd()

os.chdir(dataroute)

spectra = []

for files in os.listdir("."):
    if "src" in files and "pha" in files:
        spectra.append(files)

obsids    = []


for spectrum in spectra:

	header = pyfits.open(spectrum)

	obsid  = header[0].header["OBS_ID"]

	obsids.append(obsid)

	#print obsid, spectrum


if save:

	outfile  = open(dataroute+infofilename,'w')

	for n in range(len(spectra)):

		outfile.write(str(obsids[n]))
		outfile.write("\t")
		outfile.write(str(spectra[n]))

		outfile.write("\n")


os.chdir(here)




